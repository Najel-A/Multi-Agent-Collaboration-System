# /usr/share/logstash/pipeline/logstash.conf
input {
  beats { port => 5044 }
}

filter {
  # keep empty for now; parsing happens in the ES ingest pipeline
}

output {
  elasticsearch {
    hosts    => ["http://elasticsearch:9200"]   # use https + cacert block if your ES is TLS
    user     => "elastic"
    password => "${ELASTIC_PASSWORD}"
    index    => "logs-spark-%{+YYYY.MM.dd}"
    pipeline => "spark_ingest_pipeline"         # your ES ingest pipeline
    manage_template => false
  }
  stdout { codec => rubydebug }
}
